<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Part of Speech Review - ESOL Teacher Resources</title>
  <meta name="description" content="Interactive part of speech review activity where students identify parts of speech in sentences and learn proper sentence construction.">
  <meta name="activity-type" content="worksheet">
  <meta name="activity-level" content="intermediate">
  <meta name="activity-category" content="grammar">
  <link rel="stylesheet" href="../../../assets/css/main.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    .activity-content {
      max-width: 1000px;
    }
    
    .part-of-speech-review {
      max-width: 900px;
      margin: 0 auto;
    }
    
    .instruction-box {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.08) 0%, rgba(139, 92, 246, 0.08) 100%);
      border: 2px solid rgba(99, 102, 241, 0.2);
      border-radius: var(--radius-md);
      padding: var(--spacing-lg);
      margin-bottom: var(--spacing-2xl);
    }
    
    .instruction-box h2 {
      color: #6366f1;
      margin-bottom: var(--spacing-md);
      font-size: var(--font-size-xl);
    }
    
    .exercise-section {
      background: white;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: var(--spacing-xl);
      margin: var(--spacing-2xl) 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }
    
    .exercise-title {
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
      margin-bottom: var(--spacing-lg);
      padding-bottom: var(--spacing-md);
      border-bottom: 2px solid #6366f1;
    }
    
    .exercise-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border-radius: 50%;
      font-weight: 700;
      font-size: var(--font-size-lg);
    }
    
    .exercise-title h3 {
      color: #6366f1;
      margin: 0;
      font-size: var(--font-size-xl);
    }
    
    /* Sentence Analysis Styles */
    .sentence-container {
      background: var(--color-bg-light);
      padding: var(--spacing-lg);
      border-radius: var(--radius-md);
      margin: var(--spacing-lg) 0;
      border: 1px solid var(--color-border);
    }
    
    .sentence-display {
      font-size: var(--font-size-lg);
      line-height: 1.8;
      margin-bottom: var(--spacing-md);
      padding: var(--spacing-md);
      background: white;
      border-radius: var(--radius-sm);
      border: 2px solid var(--color-border);
    }
    
    .word-item {
      display: inline-block;
      padding: var(--spacing-xs) var(--spacing-sm);
      margin: 2px;
      border-radius: var(--radius-sm);
      cursor: pointer;
      transition: all 0.2s;
      border: 2px solid transparent;
      position: relative;
    }
    
    .word-item:hover {
      background: rgba(99, 102, 241, 0.1);
      border-color: rgba(99, 102, 241, 0.3);
    }
    
    .word-item.selected {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(139, 92, 246, 0.2) 100%);
      border-color: #6366f1;
      transform: scale(1.05);
    }
    
    .word-item.correct {
      background: rgba(16, 185, 129, 0.2);
      border-color: #10b981;
    }
    
    .word-item.incorrect {
      background: rgba(239, 68, 68, 0.2);
      border-color: #ef4444;
    }
    
    .parts-of-speech-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: var(--spacing-md);
      margin: var(--spacing-lg) 0;
    }
    
    .pos-button {
      padding: var(--spacing-md);
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      background: white;
      cursor: pointer;
      transition: all 0.2s;
      font-weight: 600;
      text-align: center;
      font-size: var(--font-size-sm);
    }
    
    .pos-button:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
      border-color: #6366f1;
    }
    
    .pos-button.selected {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border-color: #6366f1;
    }
    
    .pos-button.correct {
      background: #10b981;
      color: white;
      border-color: #10b981;
    }
    
    .pos-button.incorrect {
      background: #ef4444;
      color: white;
      border-color: #ef4444;
    }
    
    .check-button {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border: none;
      padding: var(--spacing-md) var(--spacing-xl);
      border-radius: var(--radius-md);
      font-size: var(--font-size-base);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: var(--spacing-md);
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-sm);
    }
    
    .check-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }
    
    .check-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none;
    }
    
    .feedback-box {
      margin-top: var(--spacing-lg);
      padding: var(--spacing-md);
      border-radius: var(--radius-md);
      display: none;
    }
    
    .feedback-box.show {
      display: block;
    }
    
    .feedback-box.correct {
      background: rgba(16, 185, 129, 0.1);
      border-left: 4px solid #10b981;
      color: #10b981;
    }
    
    .feedback-box.incorrect {
      background: rgba(239, 68, 68, 0.1);
      border-left: 4px solid #ef4444;
      color: #ef4444;
    }
    
    .feedback-box.partial {
      background: rgba(245, 158, 11, 0.1);
      border-left: 4px solid #f59e0b;
      color: #f59e0b;
    }
    
    /* Sentence Building Styles */
    .word-bank {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-sm);
      padding: var(--spacing-lg);
      background: var(--color-bg-light);
      border-radius: var(--radius-md);
      border: 2px dashed var(--color-border);
      margin: var(--spacing-lg) 0;
      min-height: 80px;
    }
    
    .word-chip {
      display: inline-block;
      padding: var(--spacing-sm) var(--spacing-md);
      background: white;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      cursor: grab;
      transition: all 0.2s;
      font-weight: 500;
      user-select: none;
    }
    
    .word-chip:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-sm);
      border-color: #6366f1;
    }
    
    .word-chip:active {
      cursor: grabbing;
    }
    
    .word-chip.used {
      opacity: 0.3;
      cursor: not-allowed;
      pointer-events: none;
    }
    
    .sentence-builder {
      min-height: 100px;
      padding: var(--spacing-lg);
      background: white;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      margin: var(--spacing-lg) 0;
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-sm);
      align-items: center;
    }
    
    .sentence-builder.empty::before {
      content: "Drag words here to build your sentence...";
      color: var(--color-text-light);
      font-style: italic;
    }
    
    .sentence-builder .word-chip {
      cursor: pointer;
    }
    
    .sentence-builder .word-chip:hover {
      background: rgba(239, 68, 68, 0.1);
      border-color: #ef4444;
    }
    
    .reset-button {
      background: var(--color-bg-gray);
      color: var(--color-text);
      border: 2px solid var(--color-border);
      padding: var(--spacing-sm) var(--spacing-md);
      border-radius: var(--radius-md);
      font-size: var(--font-size-sm);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      margin-left: var(--spacing-md);
    }
    
    .reset-button:hover {
      background: var(--color-border);
    }
    
    .answer-key {
      margin-top: var(--spacing-lg);
      padding: var(--spacing-md);
      background: rgba(99, 102, 241, 0.05);
      border-radius: var(--radius-md);
      border: 1px solid rgba(99, 102, 241, 0.2);
    }
    
    .answer-key h4 {
      color: #6366f1;
      margin-bottom: var(--spacing-sm);
    }
    
    .answer-key table {
      width: 100%;
      border-collapse: collapse;
      margin-top: var(--spacing-sm);
    }
    
    .answer-key td {
      padding: var(--spacing-xs) var(--spacing-sm);
      border-bottom: 1px solid var(--color-border);
    }
    
    .answer-key td:first-child {
      font-weight: 600;
      width: 30%;
    }
    
    .pos-color {
      display: inline-block;
      padding: 2px 8px;
      border-radius: var(--radius-sm);
      font-size: var(--font-size-sm);
      font-weight: 600;
    }
    
    .pos-noun { background: rgba(99, 102, 241, 0.2); color: #6366f1; }
    .pos-verb { background: rgba(16, 185, 129, 0.2); color: #10b981; }
    .pos-adjective { background: rgba(236, 72, 153, 0.2); color: #ec4899; }
    .pos-adverb { background: rgba(139, 92, 246, 0.2); color: #8b5cf6; }
    .pos-pronoun { background: rgba(245, 158, 11, 0.2); color: #f59e0b; }
    .pos-preposition { background: rgba(6, 182, 212, 0.2); color: #06b6d4; }
    .pos-conjunction { background: rgba(239, 68, 68, 0.2); color: #ef4444; }
    .pos-article { background: rgba(168, 85, 247, 0.2); color: #a855f7; }
    
    @media print {
      .check-button,
      .reset-button,
      .word-chip {
        cursor: default;
      }
      
      .word-item {
        cursor: default;
      }
      
      .pos-button {
        cursor: default;
      }
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container">
      <div class="header-content">
        <a href="../../../index.html" class="site-logo">ESOL Teacher Resources</a>
        <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
          <button class="theme-toggle" aria-label="Toggle dark mode" type="button">
            <i data-lucide="moon" class="icon"></i>
          </button>
          <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false" type="button">
            <i data-lucide="menu" class="icon"></i>
          </button>
        </div>
        <nav class="nav">
          <ul class="nav-list">
            <li class="nav-item">
              <a href="../index.html" class="nav-link">GRAMMAR</a>
            </li>
            <li class="nav-item">
              <a href="../../writing-reading/index.html" class="nav-link">WRITING/READING</a>
            </li>
            <li class="nav-item">
              <a href="../../speaking/index.html" class="nav-link">SPEAKING</a>
            </li>
            <li class="nav-item">
              <a href="../../vocab/index.html" class="nav-link">VOCAB</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <section class="section">
      <div class="container">
        <div class="breadcrumbs">
          <a href="../../../index.html">Home</a>
          <span class="breadcrumbs-separator">/</span>
          <a href="../index.html">Grammar</a>
          <span class="breadcrumbs-separator">/</span>
          <span>Part of Speech Review</span>
        </div>

        <div class="activity-header">
          <h1 class="activity-title">Part of Speech Review</h1>
          <div class="activity-meta">
            <span>Type: Interactive Worksheet</span>
            <span>Level: Intermediate</span>
          </div>
        </div>

        <div class="activity-content">
          <div class="part-of-speech-review">
            
            <div class="instruction-box">
              <h2>How to Use This Activity</h2>
              <p><strong>Exercise 1 - Sentence Analysis:</strong> Click on words in the sentence, then select the correct part of speech from the buttons below. Click "Check Answer" to see if you're correct.</p>
              <p><strong>Exercise 2 - Sentence Building:</strong> Drag words from the word bank to build a complete sentence. Make sure your sentence follows proper English sentence structure!</p>
            </div>

            <!-- Exercise 1: Sentence Analysis -->
            <div class="exercise-section" id="exercise1">
              <div class="exercise-title">
                <span class="exercise-number">1</span>
                <h3>Identify Parts of Speech</h3>
              </div>
              
              <p>Click on each word in the sentence below, then select its part of speech from the options.</p>
              
              <div class="sentence-container">
                <div class="sentence-display" id="sentence1">
                  <span class="word-item" data-word="The" data-pos="article">The</span>
                  <span class="word-item" data-word="quick" data-pos="adjective">quick</span>
                  <span class="word-item" data-word="brown" data-pos="adjective">brown</span>
                  <span class="word-item" data-word="fox" data-pos="noun">fox</span>
                  <span class="word-item" data-word="jumps" data-pos="verb">jumps</span>
                  <span class="word-item" data-word="over" data-pos="preposition">over</span>
                  <span class="word-item" data-word="the" data-pos="article">the</span>
                  <span class="word-item" data-word="lazy" data-pos="adjective">lazy</span>
                  <span class="word-item" data-word="dog" data-pos="noun">dog</span>
                  <span class="word-item" data-word="." data-pos="punctuation">.</span>
                </div>
                
                <div class="parts-of-speech-grid">
                  <button class="pos-button" data-pos="noun">Noun</button>
                  <button class="pos-button" data-pos="verb">Verb</button>
                  <button class="pos-button" data-pos="adjective">Adjective</button>
                  <button class="pos-button" data-pos="adverb">Adverb</button>
                  <button class="pos-button" data-pos="pronoun">Pronoun</button>
                  <button class="pos-button" data-pos="preposition">Preposition</button>
                  <button class="pos-button" data-pos="conjunction">Conjunction</button>
                  <button class="pos-button" data-pos="article">Article</button>
                </div>
                
                <button class="check-button" id="check1">
                  <i data-lucide="check-circle"></i>
                  Check Answer
                </button>
                
                <div class="feedback-box" id="feedback1"></div>
              </div>
            </div>

            <!-- Exercise 2: Another Sentence Analysis -->
            <div class="exercise-section" id="exercise2">
              <div class="exercise-title">
                <span class="exercise-number">2</span>
                <h3>Identify Parts of Speech</h3>
              </div>
              
              <div class="sentence-container">
                <div class="sentence-display" id="sentence2">
                  <span class="word-item" data-word="She" data-pos="pronoun">She</span>
                  <span class="word-item" data-word="always" data-pos="adverb">always</span>
                  <span class="word-item" data-word="studies" data-pos="verb">studies</span>
                  <span class="word-item" data-word="hard" data-pos="adverb">hard</span>
                  <span class="word-item" data-word="before" data-pos="preposition">before</span>
                  <span class="word-item" data-word="her" data-pos="pronoun">her</span>
                  <span class="word-item" data-word="exams" data-pos="noun">exams</span>
                  <span class="word-item" data-word="." data-pos="punctuation">.</span>
                </div>
                
                <div class="parts-of-speech-grid">
                  <button class="pos-button" data-pos="noun">Noun</button>
                  <button class="pos-button" data-pos="verb">Verb</button>
                  <button class="pos-button" data-pos="adjective">Adjective</button>
                  <button class="pos-button" data-pos="adverb">Adverb</button>
                  <button class="pos-button" data-pos="pronoun">Pronoun</button>
                  <button class="pos-button" data-pos="preposition">Preposition</button>
                  <button class="pos-button" data-pos="conjunction">Conjunction</button>
                  <button class="pos-button" data-pos="article">Article</button>
                </div>
                
                <button class="check-button" id="check2">
                  <i data-lucide="check-circle"></i>
                  Check Answer
                </button>
                
                <div class="feedback-box" id="feedback2"></div>
              </div>
            </div>

            <!-- Exercise 3: Sentence Building -->
            <div class="exercise-section" id="exercise3">
              <div class="exercise-title">
                <span class="exercise-number">3</span>
                <h3>Build a Sentence</h3>
              </div>
              
              <p>Drag words from the word bank to build a complete sentence. Remember: A sentence needs a subject (noun/pronoun) and a verb!</p>
              
              <div class="word-bank" id="wordBank1">
                <span class="word-chip" data-word="The">The</span>
                <span class="word-chip" data-word="students">students</span>
                <span class="word-chip" data-word="are">are</span>
                <span class="word-chip" data-word="reading">reading</span>
                <span class="word-chip" data-word="interesting">interesting</span>
                <span class="word-chip" data-word="books">books</span>
                <span class="word-chip" data-word="in">in</span>
                <span class="word-chip" data-word="the">the</span>
                <span class="word-chip" data-word="library">library</span>
                <span class="word-chip" data-word=".">.</span>
              </div>
              
              <div class="sentence-builder empty" id="sentenceBuilder1"></div>
              
              <button class="check-button" id="checkBuilder1">
                <i data-lucide="check-circle"></i>
                Check Sentence
              </button>
              <button class="reset-button" id="resetBuilder1">Reset</button>
              
              <div class="feedback-box" id="feedbackBuilder1"></div>
              
              <div class="answer-key" style="display: none;" id="answerKey1">
                <h4>Correct Sentence:</h4>
                <p>The students are reading interesting books in the library.</p>
              </div>
            </div>

            <!-- Exercise 4: Another Sentence Building -->
            <div class="exercise-section" id="exercise4">
              <div class="exercise-title">
                <span class="exercise-number">4</span>
                <h3>Build a Sentence</h3>
              </div>
              
              <div class="word-bank" id="wordBank2">
                <span class="word-chip" data-word="My">My</span>
                <span class="word-chip" data-word="friend">friend</span>
                <span class="word-chip" data-word="and">and</span>
                <span class="word-chip" data-word="I">I</span>
                <span class="word-chip" data-word="went">went</span>
                <span class="word-chip" data-word="to">to</span>
                <span class="word-chip" data-word="the">the</span>
                <span class="word-chip" data-word="beautiful">beautiful</span>
                <span class="word-chip" data-word="beach">beach</span>
                <span class="word-chip" data-word="yesterday">yesterday</span>
                <span class="word-chip" data-word=".">.</span>
              </div>
              
              <div class="sentence-builder empty" id="sentenceBuilder2"></div>
              
              <button class="check-button" id="checkBuilder2">
                <i data-lucide="check-circle"></i>
                Check Sentence
              </button>
              <button class="reset-button" id="resetBuilder2">Reset</button>
              
              <div class="feedback-box" id="feedbackBuilder2"></div>
              
              <div class="answer-key" style="display: none;" id="answerKey2">
                <h4>Correct Sentence:</h4>
                <p>My friend and I went to the beautiful beach yesterday.</p>
              </div>
            </div>

            <!-- Reference Guide -->
            <div class="exercise-section">
              <div class="exercise-title">
                <span class="exercise-number">?</span>
                <h3>Parts of Speech Reference</h3>
              </div>
              
              <div class="answer-key">
                <table>
                  <tr>
                    <td><span class="pos-color pos-noun">Noun</span></td>
                    <td>A person, place, thing, or idea (e.g., dog, city, happiness)</td>
                  </tr>
                  <tr>
                    <td><span class="pos-color pos-verb">Verb</span></td>
                    <td>An action or state of being (e.g., run, is, think)</td>
                  </tr>
                  <tr>
                    <td><span class="pos-color pos-adjective">Adjective</span></td>
                    <td>Describes a noun (e.g., big, happy, blue)</td>
                  </tr>
                  <tr>
                    <td><span class="pos-color pos-adverb">Adverb</span></td>
                    <td>Describes a verb, adjective, or another adverb (e.g., quickly, very, always)</td>
                  </tr>
                  <tr>
                    <td><span class="pos-color pos-pronoun">Pronoun</span></td>
                    <td>Replaces a noun (e.g., he, she, it, they)</td>
                  </tr>
                  <tr>
                    <td><span class="pos-color pos-preposition">Preposition</span></td>
                    <td>Shows relationship (e.g., in, on, at, over)</td>
                  </tr>
                  <tr>
                    <td><span class="pos-color pos-conjunction">Conjunction</span></td>
                    <td>Connects words or phrases (e.g., and, but, or)</td>
                  </tr>
                  <tr>
                    <td><span class="pos-color pos-article">Article</span></td>
                    <td>Specifies a noun (e.g., a, an, the)</td>
                  </tr>
                </table>
              </div>
              
              <div style="margin-top: var(--spacing-lg); padding: var(--spacing-md); background: rgba(245, 158, 11, 0.1); border-radius: var(--radius-md); border: 1px solid rgba(245, 158, 11, 0.3);">
                <h4 style="color: #f59e0b; margin-bottom: var(--spacing-sm);">Basic Sentence Structure:</h4>
                <p style="margin: 0;"><strong>Subject + Verb + Object</strong></p>
                <p style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm);">Example: The cat (subject) eats (verb) fish (object).</p>
                <p style="margin: var(--spacing-sm) 0 0 0; font-size: var(--font-size-sm);">Adjectives describe nouns. Adverbs describe verbs. Prepositions show location or time.</p>
              </div>
            </div>

          </div>
        </div>
      </div>
    </section>
  </main>

  <footer style="background-color: var(--color-bg-gray); padding: var(--spacing-xl) 0; margin-top: var(--spacing-3xl);">
    <div class="container text-center">
      <p style="color: var(--color-text-muted); font-size: var(--font-size-sm);">
        ESOL Teacher Resources - Free materials for English language educators
      </p>
    </div>
  </footer>

  <script src="../../../assets/js/main.js"></script>
  <script>
    // Initialize Lucide icons
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }

    // Exercise 1 & 2: Sentence Analysis
    function initSentenceAnalysis(exerciseNum) {
      const sentenceId = `sentence${exerciseNum}`;
      const checkId = `check${exerciseNum}`;
      const feedbackId = `feedback${exerciseNum}`;
      
      const sentence = document.getElementById(sentenceId);
      const checkButton = document.getElementById(checkId);
      const feedbackBox = document.getElementById(feedbackId);
      const posButtons = sentence.closest('.sentence-container').querySelectorAll('.pos-button');
      const wordItems = sentence.querySelectorAll('.word-item');
      
      let selectedWord = null;
      let selectedPos = null;
      let answers = {};
      
      // Click on word
      wordItems.forEach(word => {
        word.addEventListener('click', function() {
          // Remove previous selections
          wordItems.forEach(w => w.classList.remove('selected'));
          posButtons.forEach(b => b.classList.remove('selected'));
          
          // Select this word
          this.classList.add('selected');
          selectedWord = this;
          selectedPos = null;
          
          // Check if already answered
          const wordText = this.getAttribute('data-word');
          if (answers[wordText]) {
            // Highlight the correct POS button
            posButtons.forEach(btn => {
              if (btn.getAttribute('data-pos') === answers[wordText]) {
                btn.classList.add('selected');
                selectedPos = answers[wordText];
              }
            });
          }
        });
      });
      
      // Click on POS button
      posButtons.forEach(button => {
        button.addEventListener('click', function() {
          if (!selectedWord) {
            alert('Please select a word first!');
            return;
          }
          
          // Remove previous POS selections
          posButtons.forEach(b => b.classList.remove('selected'));
          
          // Select this POS
          this.classList.add('selected');
          selectedPos = this.getAttribute('data-pos');
          
          // Store answer
          const wordText = selectedWord.getAttribute('data-word');
          answers[wordText] = selectedPos;
        });
      });
      
      // Check answer
      checkButton.addEventListener('click', function() {
        const correctAnswers = {};
        wordItems.forEach(word => {
          const wordText = word.getAttribute('data-word');
          const correctPos = word.getAttribute('data-pos');
          correctAnswers[wordText] = correctPos;
        });
        
        let correctCount = 0;
        let totalCount = 0;
        
        // Check each word
        wordItems.forEach(word => {
          const wordText = word.getAttribute('data-word');
          const correctPos = word.getAttribute('data-pos');
          
          // Skip punctuation
          if (correctPos === 'punctuation') return;
          
          totalCount++;
          
          if (answers[wordText] === correctPos) {
            word.classList.add('correct');
            word.classList.remove('incorrect');
            correctCount++;
          } else if (answers[wordText]) {
            word.classList.add('incorrect');
            word.classList.remove('correct');
          }
        });
        
        // Update POS buttons
        posButtons.forEach(button => {
          const pos = button.getAttribute('data-pos');
          const wordText = selectedWord ? selectedWord.getAttribute('data-word') : null;
          
          if (wordText && correctAnswers[wordText] === pos) {
            button.classList.add('correct');
          } else if (wordText && answers[wordText] === pos && correctAnswers[wordText] !== pos) {
            button.classList.add('incorrect');
          }
        });
        
        // Show feedback
        feedbackBox.classList.remove('show', 'correct', 'incorrect', 'partial');
        
        if (correctCount === totalCount && Object.keys(answers).length === totalCount) {
          feedbackBox.classList.add('show', 'correct');
          feedbackBox.innerHTML = `<strong>Excellent!</strong> You correctly identified all parts of speech!`;
        } else if (correctCount > 0) {
          feedbackBox.classList.add('show', 'partial');
          feedbackBox.innerHTML = `<strong>Good try!</strong> You got ${correctCount} out of ${totalCount} correct. Keep practicing!`;
        } else {
          feedbackBox.classList.add('show', 'incorrect');
          feedbackBox.innerHTML = `<strong>Not quite.</strong> Try again! Remember to click on a word first, then select its part of speech.`;
        }
        
        // Reinitialize icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      });
    }
    
    // Exercise 3 & 4: Sentence Building
    function initSentenceBuilder(builderNum) {
      const wordBankId = `wordBank${builderNum}`;
      const builderId = `sentenceBuilder${builderNum}`;
      const checkId = `checkBuilder${builderNum}`;
      const resetId = `resetBuilder${builderNum}`;
      const feedbackId = `feedbackBuilder${builderNum}`;
      const answerKeyId = `answerKey${builderNum}`;
      
      const wordBank = document.getElementById(wordBankId);
      const sentenceBuilder = document.getElementById(builderId);
      const checkButton = document.getElementById(checkId);
      const resetButton = document.getElementById(resetId);
      const feedbackBox = document.getElementById(feedbackId);
      const answerKey = document.getElementById(answerKeyId);
      
      const wordChips = wordBank.querySelectorAll('.word-chip');
      let usedWords = [];
      let sentenceWords = [];
      
      // Correct answers
      const correctSentences = {
        1: "The students are reading interesting books in the library.",
        2: "My friend and I went to the beautiful beach yesterday."
      };
      
      // Drag and drop functionality
      wordChips.forEach(chip => {
        chip.addEventListener('click', function() {
          if (this.classList.contains('used')) return;
          
          // Add to sentence builder
          const newChip = this.cloneNode(true);
          newChip.classList.remove('used');
          newChip.addEventListener('click', function() {
            // Remove from sentence
            this.remove();
            sentenceWords = Array.from(sentenceBuilder.querySelectorAll('.word-chip')).map(c => c.getAttribute('data-word'));
            
            // Return to word bank
            const originalChip = Array.from(wordChips).find(c => c.getAttribute('data-word') === this.getAttribute('data-word') && c.classList.contains('used'));
            if (originalChip) {
              originalChip.classList.remove('used');
            }
            
            // Update empty state
            if (sentenceWords.length === 0) {
              sentenceBuilder.classList.add('empty');
            }
          });
          
          sentenceBuilder.appendChild(newChip);
          sentenceBuilder.classList.remove('empty');
          
          // Mark as used
          this.classList.add('used');
          usedWords.push(this.getAttribute('data-word'));
          sentenceWords.push(this.getAttribute('data-word'));
        });
      });
      
      // Check sentence
      checkButton.addEventListener('click', function() {
        const userSentence = sentenceBuilder.textContent.trim();
        const correctSentence = correctSentences[builderNum].trim();
        
        // Normalize sentences for comparison (remove extra spaces)
        const normalizedUser = userSentence.replace(/\s+/g, ' ').toLowerCase();
        const normalizedCorrect = correctSentence.replace(/\s+/g, ' ').toLowerCase();
        
        feedbackBox.classList.remove('show', 'correct', 'incorrect', 'partial');
        
        if (normalizedUser === normalizedCorrect) {
          feedbackBox.classList.add('show', 'correct');
          feedbackBox.innerHTML = `<strong>Perfect!</strong> You built a correct sentence!`;
          answerKey.style.display = 'block';
        } else {
          // Check if sentence has subject and verb
          const hasSubject = sentenceWords.some(w => ['students', 'friend', 'I', 'My'].includes(w));
          const hasVerb = sentenceWords.some(w => ['are', 'reading', 'went', 'studies'].includes(w));
          
          if (!hasSubject || !hasVerb) {
            feedbackBox.classList.add('show', 'incorrect');
            feedbackBox.innerHTML = `<strong>Not quite.</strong> A sentence needs a subject (noun/pronoun) and a verb. Try again!`;
          } else {
            feedbackBox.classList.add('show', 'partial');
            feedbackBox.innerHTML = `<strong>Good structure!</strong> Your sentence has a subject and verb, but the word order might need adjustment. The correct sentence is: "${correctSentence}"`;
            answerKey.style.display = 'block';
          }
        }
        
        // Reinitialize icons
        if (typeof lucide !== 'undefined') {
          lucide.createIcons();
        }
      });
      
      // Reset
      resetButton.addEventListener('click', function() {
        // Clear sentence builder
        sentenceBuilder.innerHTML = '';
        sentenceBuilder.classList.add('empty');
        
        // Return all words to bank
        wordChips.forEach(chip => {
          chip.classList.remove('used');
        });
        
        usedWords = [];
        sentenceWords = [];
        
        // Hide feedback and answer key
        feedbackBox.classList.remove('show');
        answerKey.style.display = 'none';
      });
    }
    
    // Initialize all exercises
    document.addEventListener('DOMContentLoaded', function() {
      initSentenceAnalysis(1);
      initSentenceAnalysis(2);
      initSentenceBuilder(1);
      initSentenceBuilder(2);
    });
  </script>
</body>
</html>







