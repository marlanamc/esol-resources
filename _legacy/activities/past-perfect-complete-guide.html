<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Present Perfect - Complete Guide & Practice | ESOL Teacher Resources</title>
  <meta name="description"
    content="Complete step-by-step guide to Present Perfect tense with numbered sections for easy navigation and focused practice on each concept.">
  <meta name="activity-type" content="guide">
  <meta name="activity-level" content="intermediate">
  <meta name="activity-category" content="grammar">
  <link rel="stylesheet" href="../../../assets/css/main.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    .grammar-guide {
      max-width: 900px;
      margin: 0 auto;
    }

    .step-section {
      background: white;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: var(--spacing-xl);
      margin: var(--spacing-2xl) 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    }

    .step-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border-radius: 50%;
      font-weight: 700;
      font-size: var(--font-size-lg);
      margin-right: var(--spacing-md);
    }

    .step-header {
      display: flex;
      align-items: center;
      margin-bottom: var(--spacing-lg);
      padding-bottom: var(--spacing-md);
      border-bottom: 2px solid #6366f1;
    }

    .step-title {
      color: #6366f1;
      font-size: var(--font-size-xl);
      margin: 0;
    }

    .explanation-box {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%);
      border: 1px solid rgba(99, 102, 241, 0.2);
      padding: var(--spacing-lg);
      margin: var(--spacing-lg) 0;
      border-radius: var(--radius-md);
    }

    .formula-box {
      background: white;
      border: 2px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: var(--spacing-lg);
      margin: var(--spacing-lg) 0;
      text-align: center;
    }

    .formula-part {
      display: inline-block;
      padding: var(--spacing-xs) var(--spacing-sm);
      margin: 2px;
      border-radius: var(--radius-sm);
      font-weight: 600;
      border: 1px solid var(--color-border);
    }

    .subject-part {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(99, 102, 241, 0.05) 100%);
      color: #6366f1;
    }

    .verb-part {
      background: linear-gradient(135deg, rgba(236, 72, 153, 0.1) 0%, rgba(236, 72, 153, 0.05) 100%);
      color: #ec4899;
    }

    .object-part {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(16, 185, 129, 0.05) 100%);
      color: #10b981;
    }

    .example-box {
      background: var(--color-bg-light);
      padding: var(--spacing-md);
      margin: var(--spacing-md) 0;
      border-radius: var(--radius-sm);
      border: 1px solid rgba(99, 102, 241, 0.2);
    }

    .example-box .example {
      margin: var(--spacing-xs) 0;
      padding: var(--spacing-xs);
    }

    .exercise-section {
      background: var(--color-bg-light);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      padding: var(--spacing-lg);
      margin: var(--spacing-lg) 0;
    }

    .exercise-title {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      color: #6366f1;
      margin-bottom: var(--spacing-md);
      font-size: var(--font-size-lg);
    }

    .exercise-instructions {
      color: var(--color-text-muted);
      margin-bottom: var(--spacing-md);
      font-style: italic;
    }

    .exercise-item {
      margin: var(--spacing-md) 0;
      padding: var(--spacing-md);
      background: white;
      border-radius: var(--radius-sm);
      border: 1px solid var(--color-border);
    }

    .exercise-item label {
      display: block;
      margin-bottom: var(--spacing-xs);
      font-weight: 500;
    }

    .exercise-item input[type="text"],
    .exercise-item select {
      width: 100%;
      padding: var(--spacing-sm);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm);
      font-size: var(--font-size-base);
      font-family: inherit;
    }

    .exercise-item input[type="text"]:focus,
    .exercise-item select:focus {
      outline: none;
      border-color: #6366f1;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    .exercise-item input[type="text"].question-input {
      width: auto;
      min-width: 80px;
      max-width: 150px;
      display: inline-block;
    }

    .exercise-item input[type="radio"] {
      margin-right: var(--spacing-sm);
      cursor: pointer;
      width: 18px;
      height: 18px;
      accent-color: #6366f1;
    }

    .exercise-item label {
      cursor: pointer;
      display: flex;
      align-items: center;
      padding: var(--spacing-xs);
      border-radius: var(--radius-sm);
      transition: background-color 0.2s;
    }

    .exercise-item label:hover {
      background-color: rgba(99, 102, 241, 0.05);
    }

    .exercise-item label:has(input[type="radio"]:checked) {
      background-color: rgba(99, 102, 241, 0.1);
    }

    @supports not selector(:has(*)) {
      .exercise-item input[type="radio"]:checked+span {
        background-color: rgba(99, 102, 241, 0.1);
      }
    }

    .check-button {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border: none;
      padding: var(--spacing-sm) var(--spacing-lg);
      border-radius: var(--radius-md);
      font-weight: 600;
      cursor: pointer;
      margin-top: var(--spacing-md);
      transition: transform 0.2s, box-shadow 0.2s;
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
    }

    .check-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    .feedback {
      margin-top: var(--spacing-md);
      padding: var(--spacing-md);
      border-radius: var(--radius-sm);
      display: none;
    }

    .feedback.correct {
      background: rgba(16, 185, 129, 0.1);
      border-left: 3px solid #10b981;
      color: #10b981;
    }

    .feedback.incorrect {
      background: rgba(239, 68, 68, 0.1);
      border-left: 3px solid #ef4444;
      color: #ef4444;
    }

    .usage-list {
      list-style: none;
      padding: 0;
    }

    .usage-list li {
      padding: var(--spacing-sm);
      margin: var(--spacing-xs) 0;
      background: var(--color-bg-light);
      border-radius: var(--radius-sm);
      border: 1px solid rgba(99, 102, 241, 0.2);
    }

    .usage-list li strong {
      color: #6366f1;
    }

    .highlight {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.15) 0%, rgba(139, 92, 246, 0.15) 100%);
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: 600;
    }

    .highlight-past-perfect {
      background: linear-gradient(135deg, rgba(236, 72, 153, 0.2) 0%, rgba(236, 72, 153, 0.15) 100%);
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: 600;
      color: #ec4899;
    }

    .highlight-past-simple {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(16, 185, 129, 0.15) 100%);
      padding: 2px 6px;
      border-radius: 3px;
      font-weight: 600;
      color: #10b981;
    }

    .tip-box {
      background: linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(245, 158, 11, 0.05) 100%);
      padding: var(--spacing-md);
      margin: var(--spacing-md) 0;
      border-radius: var(--radius-sm);
      border: 1px solid rgba(245, 158, 11, 0.3);
    }

    .tip-box strong {
      color: #f59e0b;
    }

    .timeline-box {
      background: white;
      border: 2px solid #6366f1;
      border-radius: var(--radius-md);
      padding: var(--spacing-lg);
      margin: var(--spacing-lg) 0;
      position: relative;
    }

    .timeline {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin: var(--spacing-md) 0;
      position: relative;
    }

    .timeline::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(to right, #ec4899, #10b981);
      z-index: 0;
    }

    .timeline-event {
      background: white;
      border: 2px solid;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      position: relative;
      z-index: 1;
    }

    .timeline-event.first {
      border-color: #ec4899;
      color: #ec4899;
    }

    .timeline-event.second {
      border-color: #10b981;
      color: #10b981;
    }

    .timeline-label {
      position: absolute;
      top: -30px;
      font-size: var(--font-size-sm);
      font-weight: 600;
      white-space: nowrap;
    }

    .timeline-event.first .timeline-label {
      color: #ec4899;
    }

    .timeline-event.second .timeline-label {
      color: #10b981;
    }

    .print-button {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border: none;
      padding: var(--spacing-sm) var(--spacing-lg);
      border-radius: var(--radius-md);
      font-weight: 600;
      cursor: pointer;
      margin: var(--spacing-md) 0;
      transition: transform 0.2s, box-shadow 0.2s;
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-xs);
      font-size: var(--font-size-base);
    }

    .print-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    .print-header {
      display: none;
    }

    @media print {
      @page {
        margin: 0.4in 0.5in;
      }

      * {
        box-sizing: border-box;
      }

      body {
        background: white;
        color: black;
        font-size: 10pt;
        line-height: 1.3;
      }

      .site-header,
      .breadcrumbs,
      .check-button,
      .theme-toggle,
      .mobile-menu-toggle,
      .nav,
      footer,
      .print-button,
      i[data-lucide] {
        display: none !important;
      }

      .print-header {
        display: block;
        margin-bottom: 8px;
        padding-bottom: 6px;
        border-bottom: 1px solid #000;
      }

      .print-header .name-line {
        font-size: 11pt;
        margin-bottom: 4px;
      }

      .print-header .blank-line {
        border-bottom: 1px solid #000;
        display: inline-block;
        min-width: 250px;
        margin-left: 4px;
        height: 14px;
      }

      .print-header .date-line {
        font-size: 10pt;
        margin-top: 4px;
      }

      .step-section {
        border: 1px solid #ccc;
        margin: 8px 0;
        padding: 8px;
        background: white;
        box-shadow: none;
        page-break-inside: auto;
      }

      .step-header {
        border-bottom: 1px solid #000;
        margin-bottom: 6px;
        padding-bottom: 4px;
      }

      .step-title {
        color: #000;
        font-size: 12pt;
        margin: 0;
      }

      .step-number {
        background: #000;
        color: white;
        width: 24px;
        height: 24px;
        font-size: 10pt;
        margin-right: 6px;
      }

      .explanation-box {
        background: #f9f9f9;
        border: 1px solid #ddd;
        padding: 6px;
        margin: 6px 0;
      }

      .exercise-section {
        background: white;
        border: 1px solid #ddd;
        padding: 6px;
        margin: 6px 0;
        page-break-inside: auto;
      }

      .highlight {
        background: #e0e0e0;
        padding: 1px 3px;
      }

      h1,
      h2,
      h3,
      h4 {
        margin: 4px 0;
        page-break-after: avoid;
      }

      p {
        margin: 3px 0;
      }

      ul,
      ol {
        margin: 4px 0;
        padding-left: 20px;
      }
    }
  </style>
</head>

<body>
  <header class="site-header">
    <div class="container">
      <div class="header-content">
        <a href="../../../index.html" class="site-logo">ESOL Teacher Resources</a>
        <div style="display: flex; align-items: center; gap: var(--spacing-sm);">
          <button class="theme-toggle" aria-label="Toggle dark mode" type="button">
            <i data-lucide="moon" class="icon"></i>
          </button>
          <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false" type="button">
            <i data-lucide="menu" class="icon"></i>
          </button>
        </div>
        <nav class="nav">
          <ul class="nav-list">
            <li class="nav-item">
              <a href="../index.html" class="nav-link">GRAMMAR</a>
            </li>
            <li class="nav-item">
              <a href="../../writing-reading/index.html" class="nav-link">WRITING/READING</a>
            </li>
            <li class="nav-item">
              <a href="../../speaking/index.html" class="nav-link">SPEAKING</a>
            </li>
            <li class="nav-item">
              <a href="../../vocab/index.html" class="nav-link">VOCAB</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <section class="section">
      <div class="container">
        <div class="breadcrumbs">
          <a href="../../../index.html">Home</a>
          <span class="breadcrumbs-separator">/</span>
          <a href="../index.html">Grammar</a>
          <span class="breadcrumbs-separator">/</span>
          <a href="../index.html#verb-tenses">Verb Tenses</a>
          <span class="breadcrumbs-separator">/</span>
          <span>Present Perfect</span>
        </div>

        <div class="activity-header">
          <h1 class="activity-title">Present Perfect - Complete Step-by-Step Guide</h1>
          <div class="activity-meta">
            <span class="activity-badge badge-guide">Complete Guide</span>
            <span class="activity-level">Intermediate</span>
          </div>
          <button class="print-button" onclick="window.print()">
            <i data-lucide="printer" style="width: 18px; height: 18px;"></i>
            Print Worksheet
          </button>
        </div>

        <!-- Print Header (only visible when printing) -->
        <div class="print-header">
          <div class="name-line">
            <strong>Name:</strong> <span class="blank-line"></span>
          </div>
          <div class="date-line">
            <strong>Date:</strong> <span class="blank-line"></span>
          </div>
        </div>

        <div class="grammar-guide">

          <!-- Introduction -->
          <div class="explanation-box">
            <h2 style="color: #1e293b; margin-top: 0;">
              <i data-lucide="book-open"
                style="width: 20px; height: 20px; display: inline-block; vertical-align: middle;"></i>
              Welcome! Let's Learn Present Perfect Together
            </h2>
            <p>We're going to learn Present Perfect step by step. This guide has numbered sections so you can easily navigate and say "go to section 3" or "let's work on section 5."</p>
            <p><strong>What is Present Perfect?</strong> It connects the past to the present. We use it for past actions that have a connection to now.</p>
          </div>

          <!-- SECTION 1: MEANING & USAGE -->
          <div class="step-section"
            style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%); border-color: #6366f1;">
            <div class="step-header">
              <span class="step-number">1</span>
              <h2 class="step-title">Section 1: When Do We Use Present Perfect?</h2>
            </div>

            <div class="explanation-box" style="background: white;">
              <h3 style="color: #1e293b; margin-top: 0;">Understanding the meaning first</h3>
              <p>Present Perfect connects <strong>the past to the present</strong>. It's used when something happened in the past, but we care about it NOW.</p>

              <div style="margin: var(--spacing-lg) 0;">
                <h4 style="color: #1e293b; margin-bottom: var(--spacing-md);">Present Perfect is used for:</h4>

                <div class="usage-list" style="margin-top: var(--spacing-md);">
                  <li>
                    <strong>1. Life Experiences</strong> - Things you have done in your life (up to now)
                    <div class="example-box" style="margin-top: var(--spacing-xs); margin-left: var(--spacing-md);">
                      <div class="example">I <span class="highlight">have visited</span> Paris.</div>
                      <div class="example">She <span class="highlight">has tried</span> sushi before.</div>
                      <p style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted); font-style: italic;">
                        The exact time doesn't matter - it's about the experience you have now.
                      </p>
                    </div>
                  </li>

                  <li style="margin-top: var(--spacing-md);">
                    <strong>2. Recent Actions with Results Now</strong> - Something just happened and affects the present
                    <div class="example-box" style="margin-top: var(--spacing-xs); margin-left: var(--spacing-md);">
                      <div class="example">I <span class="highlight">have lost</span> my keys. (I don't have them NOW)</div>
                      <div class="example">She <span class="highlight">has finished</span> her homework. (It's done NOW)</div>
                      <p style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted); font-style: italic;">
                        The action happened in the past, but the result is important NOW.
                      </p>
                    </div>
                  </li>

                  <li style="margin-top: var(--spacing-md);">
                    <strong>3. Unfinished Time Periods</strong> - Actions in a time period that isn't finished yet
                    <div class="example-box" style="margin-top: var(--spacing-xs); margin-left: var(--spacing-md);">
                      <div class="example">I <span class="highlight">have studied</span> English for 3 years. (still studying)</div>
                      <div class="example">We <span class="highlight">have lived</span> here since 2020. (still living here)</div>
                      <p style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted); font-style: italic;">
                        The time period continues to NOW.
                      </p>
                    </div>
                  </li>
                </div>
              </div>

              <div class="tip-box" style="margin-top: var(--spacing-lg);">
                <strong>Key Idea:</strong>
                <p style="margin: var(--spacing-xs) 0 0 0;">Present Perfect connects PAST actions to the PRESENT moment. Think: "How does this past action matter NOW?"</p>
              </div>
            </div>
          </div>

          <!-- SECTION 2: PAST PARTICIPLES -->
          <div class="step-section">
            <div class="step-header">
              <span class="step-number">2</span>
              <h2 class="step-title">Section 2: Understanding Past Participles</h2>
            </div>

            <div class="explanation-box" style="background: white;">
              <h3 style="color: #1e293b; margin-top: 0;">What is a Past Participle?</h3>
              <p>Before we learn the formula, we need to understand <strong>past participles</strong>. These are special verb forms we use with "have" and "has".</p>

              <div style="margin: var(--spacing-lg) 0;">
                <h4 style="color: #1e293b; margin-bottom: var(--spacing-md);">Two Types:</h4>

                <div class="example-box">
                  <strong style="color: #1e293b;">Regular Verbs (add -ed):</strong>
                  <div class="example">work ‚Üí worked</div>
                  <div class="example">play ‚Üí played</div>
                  <div class="example">visit ‚Üí visited</div>
                </div>

                <div class="example-box" style="margin-top: var(--spacing-md);">
                  <strong style="color: #1e293b;">Irregular Verbs (must memorize):</strong>
                  <div class="example">go ‚Üí gone</div>
                  <div class="example">see ‚Üí seen</div>
                  <div class="example">eat ‚Üí eaten</div>
                  <div class="example">be ‚Üí been</div>
                  <div class="example">have ‚Üí had</div>
                </div>
              </div>

              <div class="tip-box">
                <strong>Remember:</strong>
                <ul style="margin: var(--spacing-xs) 0; padding-left: var(--spacing-lg);">
                  <li>Regular verbs: add <strong>-ed</strong> (work ‚Üí worked)</li>
                  <li>Irregular verbs: you need to <strong>memorize</strong> them!</li>
                  <li>The past participle looks the same as past simple for regular verbs</li>
                  <li>But for irregular verbs, it's often different (went vs. gone)</li>
                </ul>
              </div>
            </div>

            <!-- Practice Exercise 1 -->
            <div class="exercise-section">
              <div class="exercise-title">
                <i data-lucide="pencil" style="width: 20px; height: 20px;"></i>
                Practice Exercise 1: Identifying Past Participles
              </div>
              <p class="exercise-instructions">Write the past participle of each verb.</p>

              <div class="exercise-item">
                <label>1. finish ‚Üí <input type="text" id="ex1-1" placeholder="past participle"></label>
              </div>

              <div class="exercise-item">
                <label>2. go ‚Üí <input type="text" id="ex1-2" placeholder="past participle"></label>
              </div>

              <div class="exercise-item">
                <label>3. see ‚Üí <input type="text" id="ex1-3" placeholder="past participle"></label>
              </div>

              <div class="exercise-item">
                <label>4. eat ‚Üí <input type="text" id="ex1-4" placeholder="past participle"></label>
              </div>

              <div class="exercise-item">
                <label>5. study ‚Üí <input type="text" id="ex1-5" placeholder="past participle"></label>
              </div>

              <button class="check-button" onclick="checkExercise1()">
                <i data-lucide="check" style="width: 18px; height: 18px;"></i>
                Check Answers
              </button>
              <div id="feedback1" class="feedback"></div>
            </div>
          </div>

          <!-- TWO VERBS SECTION -->
          <div class="step-section"
            style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.05) 0%, rgba(16, 185, 129, 0.05) 100%); border-color: #ec4899;">
            <div class="step-header">
              <span class="step-number" style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);">2</span>
              <h2 class="step-title">Using Past Perfect with TWO Verbs</h2>
            </div>

            <div class="explanation-box" style="background: white;">
              <h3 style="color: #1e293b; margin-top: 0;">This is the MOST IMPORTANT part!</h3>
              <p>Past Perfect is <strong>almost always used with TWO verbs</strong> in the same sentence. The first
                action uses Past Perfect, and the second action uses Past Simple.</p>

              <div style="margin: var(--spacing-lg) 0;">
                <h4 style="color: #1e293b; margin-bottom: var(--spacing-md);">üìå How to identify which verb comes first:
                </h4>

                <div class="example-box" style="margin-top: var(--spacing-md);">
                  <div
                    style="border-left: 4px solid #ec4899; padding-left: var(--spacing-md); margin-bottom: var(--spacing-lg);">
                    <h4 style="color: #ec4899; margin-top: 0;">Past Perfect = FIRST action (happened earlier)</h4>
                    <div class="example">When I <span class="highlight-past-simple">arrived</span>, she <span
                        class="highlight-past-perfect">had already left</span>.</div>
                    <p
                      style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                      üí° "had left" = FIRST action (she left before I arrived)
                    </p>
                  </div>

                  <div style="border-left: 4px solid #10b981; padding-left: var(--spacing-md);">
                    <h4 style="color: #10b981; margin-top: 0;">Past Simple = SECOND action (happened later)</h4>
                    <div class="example">When I <span class="highlight-past-simple">arrived</span>, she had already
                      left.</div>
                    <p
                      style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                      üí° "arrived" = SECOND action (I arrived after she left)
                    </p>
                  </div>
                </div>
              </div>

              <div style="margin: var(--spacing-lg) 0;">
                <h4 style="color: #1e293b; margin-bottom: var(--spacing-md);">üìù Common Sentence Patterns:</h4>

                <div class="example-box">
                  <div style="margin-bottom: var(--spacing-md);">
                    <strong style="color: #1e293b;">Pattern 1: "When" + Past Simple, Past Perfect</strong>
                    <div class="example">When I <span class="highlight-past-simple">got</span> home, my sister <span
                        class="highlight-past-perfect">had already cooked</span> dinner.</div>
                    <p
                      style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                      First: cooked dinner. Second: got home.
                    </p>
                  </div>

                  <div style="margin-bottom: var(--spacing-md);">
                    <strong style="color: #1e293b;">Pattern 2: Past Perfect + "before" + Past Simple</strong>
                    <div class="example">She <span class="highlight-past-perfect">had finished</span> her homework
                      before she <span class="highlight-past-simple">went</span> to bed.</div>
                    <p
                      style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                      First: finished homework. Second: went to bed.
                    </p>
                  </div>

                  <div style="margin-bottom: var(--spacing-md);">
                    <strong style="color: #1e293b;">Pattern 3: "After" + Past Perfect, Past Simple</strong>
                    <div class="example">After he <span class="highlight-past-perfect">had studied</span> for hours, he
                      <span class="highlight-past-simple">took</span> a break.</div>
                    <p
                      style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                      First: studied. Second: took a break.
                    </p>
                  </div>

                  <div>
                    <strong style="color: #1e293b;">Pattern 4: "By the time" + Past Simple, Past Perfect</strong>
                    <div class="example">By the time we <span class="highlight-past-simple">arrived</span>, the movie
                      <span class="highlight-past-perfect">had already started</span>.</div>
                    <p
                      style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                      First: movie started. Second: we arrived.
                    </p>
                  </div>
                </div>
              </div>

              <div class="tip-box">
                <strong>üí° Quick Test:</strong>
                <p style="margin: var(--spacing-xs) 0 0 0;">Ask yourself: <strong>"Which action happened
                    first?"</strong></p>
                <ul style="margin: var(--spacing-xs) 0; padding-left: var(--spacing-lg);">
                  <li>The FIRST action ‚Üí <strong>Past Perfect</strong> (had + past participle)</li>
                  <li>The SECOND action ‚Üí <strong>Past Simple</strong> (regular past tense)</li>
                </ul>
              </div>
            </div>

            <!-- Practice Exercise 2 -->
            <div class="exercise-section">
              <div class="exercise-title">
                <i data-lucide="pencil" style="width: 20px; height: 20px;"></i>
                Practice Exercise 2: Identifying Which Action Happened First
              </div>
              <p class="exercise-instructions">Read each sentence and identify which action happened FIRST. Choose Past
                Perfect or Past Simple.</p>

              <div class="exercise-item">
                <label>1. When I arrived at the party, everyone had already left.</label>
                <label style="margin-top: var(--spacing-xs);">
                  <input type="radio" name="ex2-1" value="past-perfect">
                  <span>"had left" happened first (Past Perfect)</span>
                </label>
                <label>
                  <input type="radio" name="ex2-1" value="past-simple">
                  <span>"arrived" happened first (Past Simple)</span>
                </label>
              </div>

              <div class="exercise-item">
                <label>2. She had finished her homework before she went to bed.</label>
                <label style="margin-top: var(--spacing-xs);">
                  <input type="radio" name="ex2-2" value="past-perfect">
                  <span>"had finished" happened first (Past Perfect)</span>
                </label>
                <label>
                  <input type="radio" name="ex2-2" value="past-simple">
                  <span>"went" happened first (Past Simple)</span>
                </label>
              </div>

              <div class="exercise-item">
                <label>3. By the time we got there, the store had closed.</label>
                <label style="margin-top: var(--spacing-xs);">
                  <input type="radio" name="ex2-3" value="past-perfect">
                  <span>"had closed" happened first (Past Perfect)</span>
                </label>
                <label>
                  <input type="radio" name="ex2-3" value="past-simple">
                  <span>"got" happened first (Past Simple)</span>
                </label>
              </div>

              <div class="exercise-item">
                <label>4. After he had studied for hours, he took a break.</label>
                <label style="margin-top: var(--spacing-xs);">
                  <input type="radio" name="ex2-4" value="past-perfect">
                  <span>"had studied" happened first (Past Perfect)</span>
                </label>
                <label>
                  <input type="radio" name="ex2-4" value="past-simple">
                  <span>"took" happened first (Past Simple)</span>
                </label>
              </div>

              <div class="exercise-item">
                <label>5. I was tired because I hadn't slept well the night before.</label>
                <label style="margin-top: var(--spacing-xs);">
                  <input type="radio" name="ex2-5" value="past-perfect">
                  <span>"hadn't slept" happened first (Past Perfect)</span>
                </label>
                <label>
                  <input type="radio" name="ex2-5" value="past-simple">
                  <span>"was" happened first (Past Simple)</span>
                </label>
              </div>

              <button class="check-button" onclick="checkExercise2()">
                <i data-lucide="check" style="width: 18px; height: 18px;"></i>
                Check Answers
              </button>
              <div id="feedback2" class="feedback"></div>
            </div>
          </div>

          <!-- NEGATIVE & QUESTIONS SECTION -->
          <div class="step-section">
            <div class="step-header">
              <span class="step-number">3</span>
              <h2 class="step-title">Negative and Question Forms</h2>
            </div>

            <div class="explanation-box" style="background: white;">
              <h3 style="color: #1e293b; margin-top: 0;">Negative Form</h3>
              <p>To make Past Perfect negative, add <strong>"not"</strong> after "had":</p>

              <div class="formula-box">
                <div style="margin-bottom: var(--spacing-sm);">
                  <span class="formula-part subject-part">Subject</span>
                  <span class="formula-part verb-part">had</span>
                  <span class="formula-part verb-part">not</span>
                  <span class="formula-part verb-part">past participle</span>
                </div>
                <div
                  style="margin-top: var(--spacing-sm); font-size: var(--font-size-sm); color: var(--color-text-muted);">
                  Short form: <strong>hadn't</strong>
                </div>
              </div>

              <div class="example-box">
                <div class="example">I <span class="highlight">hadn't finished</span> my homework when you called.</div>
                <div class="example">She <span class="highlight">hadn't seen</span> that movie before.</div>
                <div class="example">They <span class="highlight">hadn't left</span> yet when we arrived.</div>
              </div>

              <h3 style="color: #1e293b; margin-top: var(--spacing-lg);">Question Form</h3>
              <p>To make Past Perfect questions, put <strong>"had"</strong> before the subject:</p>

              <div class="formula-box">
                <div style="margin-bottom: var(--spacing-sm);">
                  <span class="formula-part verb-part">Had</span>
                  <span class="formula-part subject-part">Subject</span>
                  <span class="formula-part verb-part">past participle</span>
                </div>
              </div>

              <div class="example-box">
                <div class="example"><span class="highlight">Had</span> you <span class="highlight">finished</span> your
                  homework before you went to bed?</div>
                <div class="example"><span class="highlight">Had</span> she <span class="highlight">left</span> before
                  you arrived?</div>
                <div class="example"><span class="highlight">Had</span> they <span class="highlight">seen</span> that
                  movie before?</div>
              </div>

              <div class="tip-box">
                <strong>üí° Remember:</strong>
                <ul style="margin: var(--spacing-xs) 0; padding-left: var(--spacing-lg);">
                  <li>Negative: <strong>had + not + past participle</strong> (or <strong>hadn't + past
                      participle</strong>)</li>
                  <li>Question: <strong>Had + subject + past participle?</strong></li>
                  <li>In questions with two verbs, you still need to show which happened first!</li>
                </ul>
              </div>
            </div>

            <!-- Practice Exercise 3 -->
            <div class="exercise-section">
              <div class="exercise-title">
                <i data-lucide="pencil" style="width: 20px; height: 20px;"></i>
                Practice Exercise 3: Negative and Questions
              </div>
              <p class="exercise-instructions">Complete each sentence with the correct form (positive, negative, or
                question).</p>

              <div class="exercise-item">
                <label>1. I <input type="text" id="ex3-1" placeholder="had/hadn't + past participle"> (not finish) my
                  work when you called.</label>
              </div>

              <div class="exercise-item">
                <label>2. <input type="text" id="ex3-2" placeholder="Had + subject"> you <input type="text" id="ex3-3"
                    placeholder="past participle"> (see) that movie before?</label>
              </div>

              <div class="exercise-item">
                <label>3. She <input type="text" id="ex3-4" placeholder="had/hadn't + past participle"> (not leave) when
                  we arrived.</label>
              </div>

              <div class="exercise-item">
                <label>4. <input type="text" id="ex3-5" placeholder="Had + subject"> they <input type="text" id="ex3-6"
                    placeholder="past participle"> (eat) dinner before the movie started?</label>
              </div>

              <div class="exercise-item">
                <label>5. He <input type="text" id="ex3-7" placeholder="had/hadn't + past participle"> (not study)
                  English before he moved to the US.</label>
              </div>

              <button class="check-button" onclick="checkExercise3()">
                <i data-lucide="check" style="width: 18px; height: 18px;"></i>
                Check Answers
              </button>
              <div id="feedback3" class="feedback"></div>
            </div>
          </div>

          <!-- COMPLETE PRACTICE SECTION -->
          <div class="step-section"
            style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.05) 0%, rgba(5, 150, 105, 0.05) 100%); border-color: #10b981;">
            <div class="step-header">
              <span class="step-number" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">4</span>
              <h2 class="step-title">Complete Practice: Using Past Perfect with Two Verbs</h2>
            </div>

            <div class="explanation-box" style="background: white;">
              <h3 style="color: #1e293b; margin-top: 0;">Put it all together!</h3>
              <p>Now let's practice using Past Perfect correctly with TWO verbs. Remember: the FIRST action uses Past
                Perfect, the SECOND action uses Past Simple.</p>
            </div>

            <!-- Practice Exercise 4 -->
            <div class="exercise-section">
              <div class="exercise-title">
                <i data-lucide="pencil" style="width: 20px; height: 20px;"></i>
                Practice Exercise 4: Complete the Sentences
              </div>
              <p class="exercise-instructions">Complete each sentence with Past Perfect or Past Simple. Think about
                which action happened FIRST!</p>

              <div class="exercise-item">
                <label>1. When I <input type="text" id="ex4-1" placeholder="Past Simple"> (arrive) at the station, the
                  train <input type="text" id="ex4-2" placeholder="Past Perfect"> (already leave).</label>
              </div>

              <div class="exercise-item">
                <label>2. She <input type="text" id="ex4-3" placeholder="Past Perfect"> (finish) her homework before she
                  <input type="text" id="ex4-4" placeholder="Past Simple"> (go) to bed.</label>
              </div>

              <div class="exercise-item">
                <label>3. By the time we <input type="text" id="ex4-5" placeholder="Past Simple"> (get) there, the store
                  <input type="text" id="ex4-6" placeholder="Past Perfect"> (close).</label>
              </div>

              <div class="exercise-item">
                <label>4. After he <input type="text" id="ex4-7" placeholder="Past Perfect"> (study) for hours, he
                  <input type="text" id="ex4-8" placeholder="Past Simple"> (take) a break.</label>
              </div>

              <div class="exercise-item">
                <label>5. I <input type="text" id="ex4-9" placeholder="Past Simple"> (be) tired because I <input
                    type="text" id="ex4-10" placeholder="Past Perfect"> (not sleep) well the night before.</label>
              </div>

              <button class="check-button" onclick="checkExercise4()">
                <i data-lucide="check" style="width: 18px; height: 18px;"></i>
                Check Answers
              </button>
              <div id="feedback4" class="feedback"></div>
            </div>
          </div>

          <!-- SUMMARY SECTION -->
          <div class="step-section"
            style="background: linear-gradient(135deg, rgba(99, 102, 241, 0.05) 0%, rgba(139, 92, 246, 0.05) 100%); border-color: #6366f1;">
            <div class="step-header">
              <span class="step-number" style="background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);">‚úì</span>
              <h2 class="step-title">Summary: Key Points to Remember</h2>
            </div>

            <div class="explanation-box" style="background: white;">
              <h3 style="color: #1e293b; margin-top: 0;">What You've Learned</h3>

              <div class="usage-list">
                <li>
                  <strong>1. Form:</strong> Past Perfect = <strong>had + past participle</strong>
                  <p
                    style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                    Example: I had finished, She had left, They had seen
                  </p>
                </li>

                <li style="margin-top: var(--spacing-md);">
                  <strong>2. Most Important Rule:</strong> Past Perfect is used with <strong>TWO verbs</strong>
                  <p
                    style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                    The FIRST action = Past Perfect (had + past participle)<br>
                    The SECOND action = Past Simple (regular past tense)
                  </p>
                </li>

                <li style="margin-top: var(--spacing-md);">
                  <strong>3. When to Use:</strong> To show which action happened first in the past
                  <p
                    style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                    Example: When I arrived, she had already left. (She left FIRST, then I arrived)
                  </p>
                </li>

                <li style="margin-top: var(--spacing-md);">
                  <strong>4. Common Time Words:</strong> before, after, when, by the time, already
                  <p
                    style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                    These words help show the order of events
                  </p>
                </li>

                <li style="margin-top: var(--spacing-md);">
                  <strong>5. Negative:</strong> hadn't + past participle
                  <p
                    style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                    Example: I hadn't finished my work.
                  </p>
                </li>

                <li style="margin-top: var(--spacing-md);">
                  <strong>6. Questions:</strong> Had + subject + past participle?
                  <p
                    style="margin: var(--spacing-xs) 0 0 0; font-size: var(--font-size-sm); color: var(--color-text-muted);">
                    Example: Had you finished your homework?
                  </p>
                </li>
              </div>

              <div class="tip-box" style="margin-top: var(--spacing-lg);">
                <strong>üí° Final Tip:</strong>
                <p style="margin: var(--spacing-xs) 0 0 0;">Always ask yourself: <strong>"Which action happened
                    FIRST?"</strong> That action needs Past Perfect!</p>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container">
      <p>&copy; 2024 ESOL Teacher Resources. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Initialize Lucide icons
    if (typeof lucide !== 'undefined') {
      lucide.createIcons();
    }

    // Exercise answers
    const answers = {
      ex1: ['had finished', 'had left', 'had eaten', 'had seen', 'had studied'],
      ex2: ['past-perfect', 'past-perfect', 'past-perfect', 'past-perfect', 'past-perfect'],
      ex3: {
        1: "hadn't finished",
        2: "Had",
        3: "seen",
        4: "hadn't left",
        5: "Had",
        6: "eaten",
        7: "hadn't studied"
      },
      ex4: {
        1: 'arrived',
        2: 'had already left',
        3: 'had finished',
        4: 'went',
        5: 'got',
        6: 'had closed',
        7: 'had studied',
        8: 'took',
        9: 'was',
        10: "hadn't slept"
      }
    };

    function normalizeAnswer(answer) {
      return answer.toLowerCase().trim().replace(/[.,!?]/g, '');
    }

    function checkExercise1() {
      const feedback = document.getElementById('feedback1');
      let correct = 0;
      let total = 5;

      answers.ex1.forEach((answer, index) => {
        const input = document.getElementById(`ex1-${index + 1}`);
        const userAnswer = normalizeAnswer(input.value);
        const expectedAnswer = normalizeAnswer(answer);

        if (userAnswer === expectedAnswer || userAnswer.includes('had') && userAnswer.includes(expectedAnswer.split(' ')[1])) {
          correct++;
          input.style.borderColor = '#10b981';
          input.style.backgroundColor = 'rgba(16, 185, 129, 0.1)';
        } else {
          input.style.borderColor = '#ef4444';
          input.style.backgroundColor = 'rgba(239, 68, 68, 0.1)';
        }
      });

      feedback.className = `feedback ${correct === total ? 'correct' : 'incorrect'}`;
      feedback.innerHTML = correct === total
        ? `‚úÖ Excellent! You got all ${total} correct!`
        : `You got ${correct} out of ${total} correct. Remember: use "had" + past participle!`;
      feedback.style.display = 'block';
    }

    function checkExercise2() {
      const feedback = document.getElementById('feedback2');
      let correct = 0;
      let total = 5;

      answers.ex2.forEach((answer, index) => {
        const radios = document.querySelectorAll(`input[name="ex2-${index + 1}"]`);
        let selected = false;
        radios.forEach(radio => {
          if (radio.checked && radio.value === answer) {
            correct++;
            selected = true;
          }
        });

        radios.forEach(radio => {
          if (radio.checked) {
            const label = radio.closest('label');
            if (selected && radio.value === answer) {
              label.style.backgroundColor = 'rgba(16, 185, 129, 0.1)';
              label.style.borderLeft = '3px solid #10b981';
            } else {
              label.style.backgroundColor = 'rgba(239, 68, 68, 0.1)';
              label.style.borderLeft = '3px solid #ef4444';
            }
          }
        });
      });

      feedback.className = `feedback ${correct === total ? 'correct' : 'incorrect'}`;
      feedback.innerHTML = correct === total
        ? `‚úÖ Perfect! You got all ${total} correct! You understand which action happened first!`
        : `You got ${correct} out of ${total} correct. Remember: Past Perfect shows the FIRST action!`;
      feedback.style.display = 'block';
    }

    function checkExercise3() {
      const feedback = document.getElementById('feedback3');
      let correct = 0;
      let total = 7;

      const checks = [
        { id: 'ex3-1', answer: "hadn't finished" },
        { id: 'ex3-2', answer: 'Had' },
        { id: 'ex3-3', answer: 'seen' },
        { id: 'ex3-4', answer: "hadn't left" },
        { id: 'ex3-5', answer: 'Had' },
        { id: 'ex3-6', answer: 'eaten' },
        { id: 'ex3-7', answer: "hadn't studied" }
      ];

      checks.forEach((check, index) => {
        const input = document.getElementById(check.id);
        if (!input) return;
        const userAnswer = normalizeAnswer(input.value);
        const expectedAnswer = normalizeAnswer(check.answer);

        if (userAnswer === expectedAnswer) {
          correct++;
          input.style.borderColor = '#10b981';
          input.style.backgroundColor = 'rgba(16, 185, 129, 0.1)';
        } else {
          input.style.borderColor = '#ef4444';
          input.style.backgroundColor = 'rgba(239, 68, 68, 0.1)';
        }
      });

      feedback.className = `feedback ${correct === total ? 'correct' : 'incorrect'}`;
      feedback.innerHTML = correct === total
        ? `‚úÖ Perfect! You got all ${total} correct! You've mastered negative and question forms!`
        : `You got ${correct} out of ${total} correct. Think about whether it's positive, negative, or a question!`;
      feedback.style.display = 'block';
    }

    function checkExercise4() {
      const feedback = document.getElementById('feedback4');
      let correct = 0;
      let total = 10;

      const checks = [
        { id: 'ex4-1', answer: 'arrived' },
        { id: 'ex4-2', answer: 'had already left' },
        { id: 'ex4-3', answer: 'had finished' },
        { id: 'ex4-4', answer: 'went' },
        { id: 'ex4-5', answer: 'got' },
        { id: 'ex4-6', answer: 'had closed' },
        { id: 'ex4-7', answer: 'had studied' },
        { id: 'ex4-8', answer: 'took' },
        { id: 'ex4-9', answer: 'was' },
        { id: 'ex4-10', answer: "hadn't slept" }
      ];

      checks.forEach((check) => {
        const input = document.getElementById(check.id);
        if (!input) return;
        const userAnswer = normalizeAnswer(input.value);
        const expectedAnswer = normalizeAnswer(check.answer);

        // More flexible matching
        let isCorrect = false;
        if (userAnswer === expectedAnswer) {
          isCorrect = true;
        } else if (check.id.includes('1') || check.id.includes('4') || check.id.includes('5') || check.id.includes('8') || check.id.includes('9')) {
          // Past Simple answers - check for common past forms
          if (expectedAnswer === 'arrived' && (userAnswer.includes('arriv') || userAnswer === 'arrive')) isCorrect = true;
          else if (expectedAnswer === 'went' && (userAnswer.includes('went') || userAnswer.includes('go'))) isCorrect = true;
          else if (expectedAnswer === 'got' && (userAnswer.includes('got') || userAnswer.includes('get'))) isCorrect = true;
          else if (expectedAnswer === 'took' && (userAnswer.includes('took') || userAnswer.includes('take'))) isCorrect = true;
          else if (expectedAnswer === 'was' && (userAnswer.includes('was') || userAnswer.includes('be'))) isCorrect = true;
        } else {
          // Past Perfect answers - check for "had" + verb
          if (userAnswer.includes('had') && expectedAnswer.includes('had')) {
            const verbPart = expectedAnswer.split(' ').slice(1).join(' ');
            if (userAnswer.includes(verbPart.split(' ')[verbPart.split(' ').length - 1])) {
              isCorrect = true;
            }
          }
        }

        if (isCorrect) {
          correct++;
          input.style.borderColor = '#10b981';
          input.style.backgroundColor = 'rgba(16, 185, 129, 0.1)';
        } else {
          input.style.borderColor = '#ef4444';
          input.style.backgroundColor = 'rgba(239, 68, 68, 0.1)';
        }
      });

      feedback.className = `feedback ${correct === total ? 'correct' : 'incorrect'}`;
      feedback.innerHTML = correct === total
        ? `‚úÖ Perfect! You got all ${total} correct! You've mastered Past Perfect with two verbs! üéâ`
        : `You got ${correct} out of ${total} correct. Remember: FIRST action = Past Perfect, SECOND action = Past Simple!`;
      feedback.style.display = 'block';
    }
  </script>
</body>

</html>